<!DOCTYPE html>

<head>
    <title>Builder</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
</head>

<body>
    <div>
        <div id="builder">
            <canvas id="canvas" width="500" height="500">
                Your browser does not support the HTML5 canvas tag.
            </canvas>
        </div>
    </div>
    <script>
        // read the parameters from the URL
        var urlParams = new URLSearchParams(window.location.search);
        var img1 = urlParams.get('img1');
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var img = new Image();
        img.src = img1;
        img.crossOrigin = "Anonymous";

        img.onload = function () {
            ctx.drawImage(img, 0, 0, 500, 500);
            ctx.drawImage(img, 0, 0, 250, 250);
            ctx.drawImage(img, 250, 0, 250, 250);
            ctx.drawImage(img, 0, 250, 250, 250);
            ctx.drawImage(img, 250, 250, 250, 250);
        }
        function downloadImage() {
            var image = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"); //Convert image to 'octet-stream' (Just a download, really)
            window.location.href = image;
            console.log(image);
        }
        setTimeout(downloadImage, 1000); // Delay image download by 1 second
    </script>
</body>

</html>

